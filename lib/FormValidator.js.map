{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 220ebfb430335e73410b","webpack:///./src/validators.js","webpack:///./src/index.js","webpack:///./src/input.js","webpack:///./src/inputTypes.js"],"names":["defaultValidators","EMPTY","value","length","NO_EMPTY","VALUE_IN","min","max","fromValidations","validations","validators","obj","forEach","validation","Array","isArray","name","params","Object","assign","Validator","options","defaults","fields","style","defaultStyle","map","field","strict","validClass","invalidClass","Input","formStyle","el","type","onChange","HTMLInputElement","Error","$el","typeAttr","getAttribute","attrToType","NONE","userValidations","keys","filter","includes","init","changeProperty","addEventListener","handleChange","toLowerCase","TEXT","MAIL","PASSWORD","NUMBER","DATE","TIME","DATETIME","event","target","checked","valids","invalids","entries","validator","push","isValid","classList","remove","add","canceled","preventDefault","EMAIL"],"mappings":"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","file":"FormValidator.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"FormValidator\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FormValidator\"] = factory();\n\telse\n\t\troot[\"FormValidator\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 220ebfb430335e73410b","const defaultValidators = {\n  EMPTY: value => !value.length,\n  NO_EMPTY: value => value.length,\n  VALUE_IN: ({ min, max }) => value => (!min || +value >= min) && (!max || +value <= max),\n};\n\nconst fromValidations = (validations = [], validators = defaultValidators) => {\n  const obj = {};\n  validations.forEach((validation) => {\n    if (Array.isArray(validation)) {\n      const [name, params] = validation;\n      Object.assign(obj, {\n        [name]: validators[name](params),\n      });\n    } else {\n      Object.assign(obj, {\n        [validation]: validators[validation],\n      });\n    }\n  });\n  return obj;\n};\n\nexport {\n  defaultValidators,\n  fromValidations,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/validators.js","import { defaultValidators, fromValidations } from './validators';\nimport Input from './input';\n\n/**\n * Validator\n * @class\n */\nclass Validator {\n  static defaults = {\n    fields: [],\n    validators: defaultValidators,\n  };\n\n  static defaultStyle = {\n    strict: false,\n    validClass: 'valid',\n    invalidClass: 'invalid',\n  }\n\n  /**\n   * Initialize the form validator.\n   * @param {Object} options\n   */\n  constructor(options) {\n    const {\n      fields,\n      validators,\n      style,\n    } = Object.assign({}, Validator.defaults, options);\n\n    /**\n     * General style of the form validator.\n     *\n     * @member FormValidator#style\n     * @prop {Boolean} strict\n     * @prop {String} validClass\n     * @prop {String} invalidClass\n     */\n    this.style = Object.assign({}, Validator.defaultStyle, style);\n\n    /**\n     * Custom validators for the validator.\n     * @member FormValidator#validators\n     * @type {Array.<Function>}\n     */\n    this.validators = validators;\n\n    /**\n     * Input fields to be validated.\n     * @member FormValidator#fields\n     * @type {Array.<Input>}\n     */\n    this.fields = fields.map(field => new Input(\n      Object.assign(field, { validators: fromValidations(field.validations, this.validators) }),\n      this.style,\n    ));\n  }\n}\n\n/* eslint import/prefer-default-export: off */\nexport { Validator };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import InputTypes from './inputTypes';\nimport { fromValidations } from './validators';\n\n/**\n * Representation of an HTML input element,\n * validated by the validator.\n * @class\n */\nclass Input {\n  static defaults = {\n    el: null,\n    type: null,\n    onChange: null,\n    validators: [],\n    style: {\n      strict: false,\n      validClass: null,\n      invalidClass: null,\n    },\n  }\n\n  /**\n   * Creates an Input instance.\n   *\n   * @param {Object} options\n   * @param {Object} formStyle\n   */\n  constructor(options, formStyle) {\n    const {\n      el,\n      type,\n      onChange,\n      validators,\n      style,\n    } = Object.assign({}, Input.defaults, { style: formStyle }, options);\n\n    if (!el || !(el instanceof HTMLInputElement)) {\n      throw new Error(`Element ${el} is not an input field`);\n    }\n\n    /**\n     * HTML input element.\n     * @member Input#$el\n     * @type {HTMLInputElement}\n     */\n    this.$el = el;\n\n    if (!type) {\n      const typeAttr = el.getAttribute('type');\n      this.type = typeAttr ? Input.attrToType(typeAttr) : InputTypes.NONE;\n    } else if (typeof type === 'string') {\n      this.type = this.attrToType(type);\n    } else {\n      this.type = type;\n    }\n\n    const userValidations = Object.keys(validators);\n\n    /**\n     * Validators for the input.\n     * @member Input#validators\n     * @type {Array.<function>}\n     */\n    this.validators = {\n      ...validators, // User defined validators\n      ...fromValidations(this.type.validations.filter(validation =>\n        !userValidations.includes(validation))), // Default validators from input type\n    };\n\n    /**\n     * Input value change callback.\n     * @member Input#onChange\n     * @type {Function}\n     */\n    this.onChange = onChange;\n\n    /**\n     * Style for the input.\n     * @member Input#style\n     * @prop {Boolean} strict\n     * @prop {String} validClass\n     * @prop {String} invalidClass\n     */\n    this.style = style;\n\n    this.init();\n  }\n\n  init() {\n    const { changeProperty } = this.type;\n\n    if (changeProperty) {\n      this.$el.addEventListener(changeProperty, this.handleChange);\n      this.$el.addEventListener('blur', this.handleChange);\n    }\n  }\n\n  handleChange = (event) => {\n    const {\n      validators,\n      onChange,\n      style: { strict, validClass, invalidClass },\n    } = this;\n\n    const { target } = event;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n\n    const valids = [];\n    const invalids = [];\n\n    Object.entries(validators).forEach(([name, validator]) => {\n      if (validator(value)) {\n        valids.push(name);\n      } else {\n        invalids.push(name);\n      }\n    });\n\n    const isValid = !invalids.length;\n    if (isValid) {\n      target.classList.remove(invalidClass);\n      target.classList.add(validClass);\n    } else {\n      target.classList.remove(validClass);\n      target.classList.add(invalidClass);\n    }\n\n    const canceled = !isValid && strict;\n    if (canceled) {\n      event.preventDefault();\n      // TODO Make operation cancel work\n    }\n\n    if (onChange) {\n      onChange(event, value, {\n        isValid,\n        valids,\n        invalids,\n        strict,\n        canceled,\n      });\n    }\n  }\n\n  /**\n   * Return the internal representation of a type of input.\n   *\n   * @param {String} type A value of the type attribute\n   * @return {Object}\n   */\n  static attrToType = (type) => {\n    switch (type.toLowerCase()) {\n      case 'text':\n        return InputTypes.TEXT;\n      case 'email':\n        return InputTypes.MAIL;\n      case 'password':\n        return InputTypes.PASSWORD;\n      case 'number':\n        return InputTypes.NUMBER;\n      case 'date':\n        return InputTypes.DATE;\n      case 'time':\n        return InputTypes.TIME;\n      case 'datetime-local':\n        return InputTypes.DATETIME;\n      default:\n        return InputTypes.NONE;\n    }\n  }\n}\n\nexport default Input;\n\n\n\n// WEBPACK FOOTER //\n// ./src/input.js","export default {\n  NONE: {},\n  EMPTY: {\n    changeProperty: 'input',\n    validations: ['EMPTY'],\n  },\n  TEXT: {\n    changeProperty: 'input',\n    validations: ['NO_EMPTY'],\n  },\n  EMAIL: {\n    changeProperty: 'input',\n    validations: ['NO_EMPTY'],\n  },\n  PASSWORD: {\n    changeProperty: 'input',\n    validations: ['NO_EMPTY'],\n  },\n  NUMBER: {\n    changeProperty: 'change',\n    validations: ['NO_EMPTY'],\n  },\n  DATE: {\n    changeProperty: 'change',\n    validations: ['NO_EMPTY'],\n  },\n  TIME: {\n    changeProperty: 'change',\n    validations: ['NO_EMPTY'],\n  },\n  DATETIME: {\n    changeProperty: 'change',\n    validations: ['NO_EMPTY'],\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/inputTypes.js"],"sourceRoot":""}